# Решение проблем с переменными окружения в Amvera

## Проблема: Переменные окружения не подхватываются

Если вы добавили переменные в Amvera, но приложение все еще показывает ошибки, проверьте следующее:

## 1. Правильные имена переменных

В Amvera используйте **точно такие же имена**, как указано ниже (без префиксов):

```
SUPABASE_URL
SUPABASE_KEY
SUPABASE_SERVICE_KEY
JWT_SECRET
JWT_REFRESH_SECRET
TELEGRAM_BOT_TOKEN
TELEGRAM_WEBAPP_URL
TELEGRAM_ADMIN_CHAT_ID
NODE_ENV
DISABLE_REALTIME
```

**Важно:** НЕ используйте префикс `NUXT_` - модуль `@nuxtjs/supabase` автоматически ищет `SUPABASE_URL` и `SUPABASE_KEY`.

## 2. Проверка переменных в Amvera

1. Откройте панель Amvera → ваше приложение → **«Переменные окружения»**
2. Убедитесь, что:
   - Все переменные добавлены
   - Значения скопированы полностью (без лишних пробелов в начале/конце)
   - Нет опечаток в именах переменных

## 3. Перезапуск приложения

После добавления/изменения переменных:
1. Amvera должен автоматически перезапустить приложение
2. Если не перезапустилось - нажмите **«Перезапустить»** вручную
3. Подождите 10-30 секунд

## 4. Проверка логов

Проверьте логи приложения в Amvera:
- Не должно быть ошибок `Missing supabase url` или `Missing supabase anon key`
- Если ошибки есть - переменные не передаются в контейнер

## 5. Альтернативный способ: через Dockerfile

Если переменные все еще не работают, можно добавить их в Dockerfile (но это менее безопасно):

```dockerfile
ENV SUPABASE_URL=${SUPABASE_URL}
ENV SUPABASE_KEY=${SUPABASE_KEY}
```

Но лучше использовать переменные окружения в панели Amvera.

## 6. Проверка в коде

В `nuxt.config.ts` переменные уже настроены правильно:
- `process.env.SUPABASE_URL` - будет читаться из окружения Amvera
- `process.env.SUPABASE_KEY` - будет читаться из окружения Amvera

## 7. Если ничего не помогает

1. Убедитесь, что в панели Amvera переменные добавлены в разделе **«Переменные окружения»** (не в другом месте)
2. Проверьте, что значения переменных правильные (скопированы из Supabase Dashboard)
3. Перезапустите приложение вручную
4. Проверьте логи приложения на наличие других ошибок

## Частые ошибки

### Ошибка: "Your project's URL and API key are required"

**Причина:** Модуль `@nuxtjs/supabase` не находит переменные `SUPABASE_URL` и `SUPABASE_KEY`

**Решение:**
1. Проверьте, что переменные добавлены в Amvera с правильными именами
2. Убедитесь, что значения не пустые
3. Перезапустите приложение

### Переменные не обновляются

**Причина:** Приложение использует кэшированные значения

**Решение:**
1. Перезапустите приложение вручную в панели Amvera
2. Подождите полной перезагрузки (30-60 секунд)

## Проверка работы

После настройки переменных:
1. Откройте приложение в браузере
2. Ошибка 500 должна исчезнуть
3. Приложение должно подключаться к Supabase

