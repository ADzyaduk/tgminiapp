# Как найти URL приложения и проверить статус в Amvera

## Где найти URL приложения

### Способ 1: В панели управления

1. Войдите в [Amvera Cloud](https://amvera.ru)
2. Откройте ваше приложение
3. URL приложения обычно отображается:
   - В верхней части страницы приложения
   - В разделе **«Домены»** или **«Domains»**
   - В разделе **«Настройки»** или **«Settings»**
   - Формат: `https://your-app-name.amvera.app` или `https://your-app-name.amvera.ru`

### Способ 2: В списке приложений

1. На главной странице Amvera (список приложений)
2. Найдите ваше приложение
3. URL обычно отображается рядом с названием или в карточке приложения

### Способ 3: Через API или CLI

Если у вас есть доступ к API, можно получить URL через API.

## Проверка статуса приложения

### Статус "Работает с ошибками"

Это означает, что:
- ✅ Контейнер запущен
- ❌ Но есть ошибки при работе приложения

### Что проверить:

1. **Логи приложения:**
   - В панели Amvera: **«Логи»** → **«Логи приложения»** (не сборки!)
   - Или **«Application Logs»** / **«Runtime Logs»**

2. **Статус контейнера:**
   - В панели Amvera: **«Контейнеры»** или **«Containers»**
   - Проверьте статус каждого контейнера

3. **Health check:**
   - В панели Amvera: **«Мониторинг»** или **«Monitoring»**
   - Проверьте, проходит ли health check

## Решение проблемы "Контейнеры не могут запуститься"

### Проблема 1: Конфликт команд запуска

**Симптомы:**
- Контейнер запускается и сразу падает
- Ошибка в логах запуска

**Решение:**
Проверьте `amvera.yaml` - команда запуска должна совпадать с `CMD` в Dockerfile или быть пустой (тогда используется CMD из Dockerfile).

### Проблема 2: Отсутствуют файлы

**Симптомы:**
- `Cannot find module`
- `ENOENT: no such file or directory`

**Решение:**
1. Убедитесь, что `.output` папка создается при сборке
2. Проверьте, что все файлы копируются в финальный образ

### Проблема 3: Проблемы с правами доступа

**Симптомы:**
- `Permission denied`
- `EACCES`

**Решение:**
Проверьте права доступа к файлам в Dockerfile.

## Диагностика

### Шаг 1: Проверьте логи запуска

В панели Amvera:
1. Откройте ваше приложение
2. Перейдите в **«Логи»** → **«Логи приложения»** (НЕ логи сборки!)
3. Найдите первую ошибку

### Шаг 2: Проверьте переменные окружения

1. В панели Amvera: **«Переменные окружения»**
2. Убедитесь, что все переменные добавлены:
   - `SUPABASE_URL`
   - `SUPABASE_KEY`
   - `SUPABASE_SERVICE_KEY`
   - `JWT_SECRET`
   - `JWT_REFRESH_SECRET`
   - `TELEGRAM_BOT_TOKEN`
   - `TELEGRAM_WEBAPP_URL`
   - `TELEGRAM_ADMIN_CHAT_ID`
   - `NODE_ENV=production`
   - `DISABLE_REALTIME=false`

### Шаг 3: Перезапустите приложение

1. В панели Amvera: **«Перезапустить»** или **«Restart»**
2. Дождитесь перезапуска
3. Проверьте логи снова

## Частые ошибки при запуске

### Ошибка: "Cannot find module '.output/server/index.mjs'"

**Причина:** Файл не скопирован в финальный образ

**Решение:** Проверьте Dockerfile - убедитесь, что `.output` копируется из builder stage

### Ошибка: "npm: command not found"

**Причина:** В production образе нет npm (если используете только node)

**Решение:** Используйте `node .output/server/index.mjs` вместо `npm start`

### Ошибка: "Port 3000 already in use"

**Причина:** Порт занят (маловероятно в Amvera)

**Решение:** Amvera автоматически назначает порт, убедитесь, что `containerPort` указан правильно

## Контакты поддержки

Если ничего не помогает:
1. Соберите логи запуска из панели Amvera
2. Сделайте скриншот статуса приложения
3. Обратитесь в поддержку: support@amvera.ru

