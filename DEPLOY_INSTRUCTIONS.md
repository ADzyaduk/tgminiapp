# Инструкция по деплою с исправлением WebSocket проблем

## Быстрое исправление для продакшена

### 1. Добавьте переменную окружения
```bash
DISABLE_REALTIME=true
```

### 2. Перезапустите приложение
```bash
npm run build
npm run start
```

## Что было исправлено

1. **Создан безопасный композабл** `useSupabaseSafe()` который:
   - Автоматически отключает realtime на продакшене
   - Заменяет realtime подписки на polling
   - Предотвращает ошибки WebSocket

2. **Обновлены файлы**:
   - `composables/useSupabaseSafe.ts` - новый безопасный композабл
   - `stores/groupTrips.ts` - использует безопасный композабл
   - `composables/useGroupTrips.ts` - использует безопасный композабл
   - `nuxt.config.ts` - добавлена переменная окружения

3. **Создана документация**:
   - `docs/WEBSOCKET_FIX.md` - подробное описание проблемы и решений

## Проверка работы

После деплоя:
- ✅ Ошибки WebSocket должны исчезнуть
- ✅ Приложение работает стабильно
- ✅ Данные обновляются через HTTP запросы каждые 30 секунд
- ✅ Все функции бронирования работают корректно

## Альтернативные решения

Если проблемы остаются, см. `docs/WEBSOCKET_FIX.md` для дополнительных решений. 